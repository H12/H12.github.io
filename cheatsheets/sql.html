<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="sql.css">  <!-- Insert a link to the stylesheet here -->
    <title>SQL Cheat Sheet</title>
  </head>

  <header>
    <h1>SQL Cheat Sheet</h1>
    <p>SQL is a standard language for accessing databases. SQL organizes data in tables with rows and columns. It also allows for multiple relational databases to be linked together.</p>
  </header>

  <section>
    <article class="left">
      <h2>Table Structure</h2>
      <p>Relational Databases in SQL are created in the form of rows and columns. Rows represent an instance or entry in the database, and the columns represent an attribute of that entry. In an optimal table, every entry is unique. If a table has a column with many repeated entries, that indicates that a new table should be made containing those entries.</p>
    </article>

    <article class="left">
      <h2>Table Relationships</h2>
      <p>There are three general kinds of table relationships, one-to-many, many-to-many, and one-to-one. In our examples we will cover multiple use-cases for relational databases.</p>
      <ul>
        <li><strong>One-to-Many</strong> - In a "class roster" database, a teacher may teach zero or more classes, while a class is taught by one (and only one) teacher. Take note that for every value in the parent table, there could be zero, one, or more rows in the child table. For every value in the child table, there is one and only one row in the parent table.</li>
        <li><strong>Many-to-Many</strong> - In a "product sales" database, a customer's order may contain one or more products; and a product can appear in many orders. To support many-to-many relationship, we need to create a third table (known as a junction table).The many-to-many relationship is, in fact, implemented as multiple one-to-many relationships, with the introduction of the junction table.</li>
        <li><strong>One-to-One</strong> - In a "product sales" database, a product may have optional supplementary information. Keeping them inside a single table results in many empty spaces (in those records without these optional data). Furthermore, these large data may degrade the performance of the database. Instead, we can create another table to store the optional data. A record will only be created for those products with optional data.</li>
      </ul>
    </article>

    <article class = "right">
      <h2>Keys</h2>
      <p>In the relational model, a table cannot contain duplicate rows, because that would create ambiguities in retrieval. To ensure uniqueness, each table should have a column (or a set of columns), called primary key, that uniquely identifies every records of the table. A primary key is called a simple key if it is a single column; it is called a composite key if it is made up of several columns. In choosing a primary key, it should be simple and familiar, should not change, and is best to use an integer for efficiency. A foreign key of a child table is a primary key of a parent table, used to reference the parent table. The assumption that the primary key is an auto-incrementing integer called id is baked deeply into Rails. Most web applications follow this convention.</p>
    </article>

    <article class = "right">
      <h2>Conventions</h2>
      <ol>
        <li>
          Table names are pluralized, e.g., "students," "products," "todos," etc.
        </li>
        <li>
          Each row is uniquely identified by an automatically-incrementing integer field called <code>id</code>. ActiveRecord migrations do this for you automatically, but you'll have to be explicit when designing your tables by hand.
        </li>

        <li>
          Fields are named using snake_case, rather than camelCase. The latter looks weird and out of place in Ruby.
        </li>
        <li>
          Fields that involve dates or times end in <code>_at</code> or <code>_on</code> (<code>created_at</code>, <code>updated_at</code>, <code>completed_at</code>, etc.) unless it's really obvious they already refer to something time-related. For example, it's more common to say <code>birthday</code> than <code>birthday</code>.</li>
        <li>
          When in doubt, make your field and table names as self-explanatory as possible. Avoid field names like <code>type</code>, <code>kind</code>, <code>status</code>, etc. They could refer to anything! Err on the side of clarity, even if it seems verbose. Other programmers will appreciate it, and computers don't care if your field name is 20 characters long rather than 5 characters long.
        </li>
        <li>
          Rails includes <code>created_at</code> and <code>updated_at</code> fields by default, which record when a row is first added to a table and when it was last updated. They are good to include for records, so they will often be included in schemas.
        </li>
      </ol>
    </article>

    <article class = "left">
      <h2>Queries</h2>
      <h3>Select</h3>
      <p>The SELECT statement is used to select data from a database. The result is stored in a result table, called the result-set.</p>
      <code>SELECT column_name,column_name FROM table_name;</code>

      <h3>Order By</h3>
      <p>
        The ORDER BY keyword is used to sort the result-set by one or more columns. The ORDER BY keyword sorts the records in ascending order by default. To sort the records in a descending order, you can use the DESC keyword.
      </p>
      <code>SELECT column_name FROM table_name ORDER BY column_name ASC|DESC;</code>

      <h3>Where</h3>
      <p>The WHERE clause is used to extract only those records that fulfill a specified criterion.</p>
      <code>SELECT column_name FROM table_name WHERE column_name operator value;</code>

      <h3>Like</h3>
      <p>The LIKE operator is used to search for a specified pattern in a column.</p>
      <code>SELECT column_name(s) FROM table_name WHERE column_name LIKE pattern;</code>

      <h3>Joins</h3>
      <p>An SQL JOIN clause is used to combine rows from two or more tables, based on a common field between them. The most common type of join is: SQL INNER JOIN (simple join). An SQL INNER JOIN return all rows from multiple tables where the join condition is met.</p>
      <code>SELECT Tables1.ID, Tables2.colum_name, Tables1.column_name FROM Tables1 INNER JOIN Tables2 ON Tables1.table2_ID=Tables2.ID;</code>
      <ul>
        <li>INNER JOIN: Returns all rows when there is at least one match in BOTH tables</li>
        <li>LEFT JOIN: Return all rows from the left table, and the matched rows from the right table</li>
        <li>RIGHT JOIN: Return all rows from the right table, and the matched rows from the left table</li>
        <li>FULL JOIN: Return all rows when there is a match in ONE of the tables</li>
      </ul>
    </article>

  </section>

  <footer>
    <a href="http://www.ntu.edu.sg/home/ehchua/programming/sql/Relational_Database_Design.html">A Quick-Start Tutorial on Relational Database Design</a>
    <br>
    <a href="http://www.w3schools.com/sql/default.asp">W3Schools SQL Tutorial</a>
    <br>
    <a href="https://github.com/Devbootcamp/phase-0-unit-3/blob/master/week-8/intro-to-databases/conventions.md">DevBootcamp SQL Conventions</a>
  </footer>

</html>
